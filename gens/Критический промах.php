function fixText(text) { const lines = text.split('\n'); let fixedText = ''; for (let i = 0; i < lines.length; i++) { const line = lines[i].trim(); if (line.match(/^\d+./)) { fixedText += line + ' '; } else { fixedText += line + '\n'; } } return fixedText.trim(); }
<?php


function mele(){
    $data = explode("\n",preg_replace('/\d+/u', '',
        "Потерял равновесие при ударе - ход завершен. (оставшиеся действия тратятся на восстановление равновесия) 
Выпустил из руки оружие при ударе - оружие упало. (может быть недоступно, если экипированы латные рукавицы с замком, удерживающие оружие, либо если оружие намертво прикреплено к руке; в этом случае - растяжение, -1 к атаке на 1 час)
Не справился с оружием и поранил себя. (1/2 урона) 
Во время атаки потерял равновесие и открылся - противник, по которому бил персонаж, пробивает по нему свободную атаку.
Во время атаки потерял равновесие/поскользнулся/споткнулся и упал. 
Во время атаки потерял равновесие/поскользнулся/споткнулся и упал, выронив оружие.
Во время атаки потерял равновесие/поскользнулся/споткнулся и упал, поранив себя оружием. (дробящее - 1/2 урона, ибо напороться на него не так печально)
Ударил оружием по твёрдому объекту/под неправильным углом, повредив оружие. 
Ударил по соседнему существу с целью, в пределах досягаемости, но не по самой цели. (слева, справа, сверху, снизу..)
Потерял равновесие при ударе - ход завершен. (оставшиеся действия тратятся на восстановление равновесия)"
    ));
    return $data[array_rand($data)];
}